{% extends 'appointment/base.html' %}
{% block content %}
<div class="container mt-5">
    <h2>My Appointments</h2>
    <ul class="list-group">
        {% for appt in appointments %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                    <strong>{{ appt.patient.fname }} {{ appt.patient.lname }}</strong> on {{ appt.appointed_datetime }}<br>
                    Status: <span class="badge 
                            {% if appt.status == 'pending' %}bg-warning text-dark
                            {% elif appt.status == 'confirmed' %}bg-success
                            {% elif appt.status == 'cancelled' %}bg-danger
                            {% elif appt.status == 'due' %}bg-secondary
                            {% endif %}">
                            {{ appt.status|title }}
                        </span><br>
                </div>
                {% if appt.status == 'pending' %}
                <a href="{% url 'appointment:confirm_appointment' appt.id %}" class="btn btn-sm btn-success">Confirm</a>
                {% endif %}
            </li>
        {% empty %}
            <li class="list-group-item">No appointments found.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
